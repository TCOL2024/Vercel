<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>BBiG-Quiz – Ausbildung & Sozialrecht</title>

  <!-- Deps -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    :root {
      --primary: #1e40af; /* Dunkelblau für Vertrauen, wie metafinanz.de */
      --primary2: #3b82f6;
      --primary3: #60a5fa;
      --accent: #06b6d4;
      --accent2: #22d3ee;
      --surface: #ffffff;
      --surface2: #f8fafc; /* Mehr Weißraum für Klarheit */
      --surface3: #f1f5f9;
      --surface4: #e2e8f0;
      --ink: #0f172a;
      --muted: #64748b;
      --muted2: #94a3b8;
      --border: #e2e8f0;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --gradient: linear-gradient(135deg, var(--primary), var(--primary2)); /* Subtiler Gradient */
      --gradient-accent: linear-gradient(135deg, var(--accent), var(--accent2));
    }
    html.dark {
      --surface: #0f172a;
      --surface2: #1e293b;
      --surface3: #334155;
      --surface4: #475569;
      --ink: #f1f5f9;
      --muted: #94a3b8;
      --muted2: #cbd5e1;
      --border: #475569;
    }
    html, body {
      font-family: 'Inter', sans-serif; /* Moderne Sans-Serif für Professionalität */
      background: var(--surface2);
      color: var(--ink);
      font-size: 14px;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding-inline: 24px;
    }
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px; /* Weniger Rundung für Schlichtheit */
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05); /* Subtiler Schatten */
      transition: all 0.2s ease; /* Schnellere, subtilere Übergänge */
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px; /* Dünnerer Akzent */
      background: var(--primary);
      opacity: 0;
      transition: opacity 0.2s ease;
    }
    .card:hover::before {
      opacity: 0.8; /* Weniger intensiv */
    }
    .card:hover {
      transform: translateY(-1px); /* Minimaler Lift */
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
    }
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px; /* Kleinere Padding für Schlichtheit */
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--surface);
      font-weight: 500; /* Weniger fett */
      font-size: 14px;
      transition: all 0.2s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
      transition: left 0.4s ease;
    }
    .btn:hover::before {
      left: 100%;
    }
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
    .btn-primary {
      background: var(--primary);
      border-color: transparent;
      color: #fff;
      font-weight: 600;
    }
    .btn-ghost {
      border-color: transparent;
      background: transparent;
    }
    .btn-sm {
      padding: 6px 12px;
      font-size: 13px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border: 1px solid var(--border);
      border-radius: 16px;
      background: var(--surface3);
      color: var(--muted);
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    .badge:hover {
      background: var(--surface4);
      transform: scale(1.02);
    }
    .badge-primary {
      background: rgba(30, 64, 175, 0.08);
      border-color: rgba(30, 64, 175, 0.2);
      color: #1e40af;
    }
    .progress-outer {
      height: 6px; /* Dünner */
      border-radius: 16px;
      background: var(--surface3);
      overflow: hidden;
      border: 1px solid var(--border);
    }
    .progress-inner {
      height: 100%;
      width: 0%;
      background: var(--primary);
      transition: width 0.4s ease;
      position: relative;
    }
    .progress-inner::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: shimmer 2s infinite;
    }
    @keyframes shimmer {
      0%, 100% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .seg {
      display: inline-flex;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 4px;
    }
    .seg button {
      padding: 6px 12px;
      border-radius: 16px;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    .seg button[aria-pressed="true"] {
      background: var(--primary);
      color: #fff;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
    }
    .tabs {
      display: flex;
      gap: 8px;
      overflow: auto;
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch;
    }
    .tabs::-webkit-scrollbar {
      display: none;
    }
    .tab {
      padding: 10px 16px;
      border: 1px solid var(--border);
      border-radius: 16px;
      background: var(--surface);
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      white-space: nowrap;
      transition: all 0.2s ease;
      cursor: pointer;
      position: relative;
    }
    .tab:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
    .tab[aria-selected="true"] {
      background: rgba(30, 64, 175, 0.08);
      border-color: rgba(30, 64, 175, 0.2);
      color: #1e40af;
      box-shadow: 0 0 0 2px rgba(30, 64, 175, 0.05);
    }
    #clusterSelect {
      display: none;
    }
    @media (max-width: 768px) {
      .tabs {
        display: none;
      }
      #clusterSelect {
        display: block;
      }
    }
    .q-card {
      position: relative;
      padding: 20px;
      margin-bottom: 12px;
    }
    .tip {
      margin-top: 12px;
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.03), rgba(59, 130, 246, 0.03)); /* Sehr subtil */
      border-left: 3px solid var(--primary);
      padding: 16px;
      border-radius: 8px;
      transition: all 0.2s ease;
    }
    .tip:hover {
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.05), rgba(59, 130, 246, 0.05));
      transform: translateX(2px);
    }
    .sticky-actions {
      position: sticky;
      bottom: 0;
      z-index: 40;
      backdrop-filter: blur(8px);
      background: rgba(255, 255, 255, 0.95);
      border-top: 1px solid var(--border);
    }
    html.dark .sticky-actions {
      background: rgba(15, 23, 42, 0.95);
    }

    /* Linda – Professional Floating Avatar (metafinanz.de-inspired: Minimalistisch, Blau-fokussiert) */
    #lindaBtn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 56px; /* Kleinere Größe für Schlichtheit */
      height: 56px;
      background: var(--primary); /* Einfarbig Blau, kein Gradient */
      border: none;
      z-index: 100; /* Höherer z-index für Sichtbarkeit */
      cursor: pointer;
      border-radius: 50%;
      box-shadow: 0 4px 12px rgba(30, 64, 175, 0.15); /* Subtiler Schatten */
      transition: all 0.3s ease; /* Sanfte Übergänge */
      display: flex; /* Sicherstellen, dass es sichtbar ist */
      align-items: center;
      justify-content: center;
      opacity: 1; /* Explizit sichtbar */
      visibility: visible;
    }
    #lindaBtn:hover {
      transform: translateY(-2px); /* Minimaler Lift */
      box-shadow: 0 6px 16px rgba(30, 64, 175, 0.2);
    }
    #lindaBtn svg {
      animation: subtleFloat 4s ease-in-out infinite; /* Langsamere, subtilere Animation */
    }
    @keyframes subtleFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-4px); }
    }
    #lindaWrap {
      position: fixed;
      bottom: 88px; /* Abstand zum Button */
      right: 24px;
      width: min(90vw, 380px); /* Kleinere Breite für Minimalismus */
      height: 480px;
      display: none;
      z-index: 100;
    }
    .l-shell {
      display: flex;
      flex-direction: column;
      height: 100%;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px; /* Weniger Rundung */
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08); /* Subtiler Schatten */
      overflow: hidden;
      backdrop-filter: blur(12px);
    }
    .l-top {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      border-bottom: 1px solid var(--border);
      cursor: move;
      user-select: none;
      background: var(--surface); /* Einfarbig, kein Gradient */
      color: var(--ink);
    }
    .l-body {
      flex: 1;
      display: grid;
      grid-template-rows: auto 1fr auto;
      min-height: 0;
    }
    .l-greet {
      padding: 16px;
      border-bottom: 1px dashed var(--border);
      background: var(--surface2);
      text-align: center;
    }
    .l-stream {
      overflow: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .l-msg {
      max-width: 85%;
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 14px;
      animation: fadeIn 0.2s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .l-msg.ai {
      background: var(--surface3);
      align-self: flex-start;
    }
    .l-msg.me {
      background: var(--primary);
      color: #fff;
      align-self: flex-end;
    }
    .l-input {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      padding: 16px;
      border-top: 1px solid var(--border);
      background: var(--surface2);
    }
    .l-input input {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px;
      background: var(--surface);
      outline: none;
      transition: all 0.2s ease;
    }
    .l-input input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(30, 64, 175, 0.05);
    }
    .l-resize {
      position: absolute;
      right: 6px;
      bottom: 6px;
      width: 10px;
      height: 10px;
      border-right: 1px solid var(--muted2);
      border-bottom: 1px solid var(--muted2);
      border-radius: 1px;
      cursor: nwse-resize;
      opacity: 0.6;
    }

    footer.app-footer {
      font: 12px/1.4 Inter, sans-serif;
      color: var(--muted);
      background: var(--surface2);
      border-top: 1px solid var(--border);
      margin-top: 40px;
      text-align: center;
      padding: 16px;
    }

    /* Zusätzliche Interaktive Elemente – Minimalistisch gehalten */
    .hero-section {
      background: linear-gradient(135deg, var(--surface), var(--surface2));
      padding: 48px 0; /* Weniger Padding */
      position: relative;
      overflow: hidden;
    }
    .hero-section::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(59, 130, 246, 0.02) 0%, transparent 70%);
      animation: subtleRotate 30s linear infinite;
    }
    @keyframes subtleRotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    .interactive-element {
      transition: all 0.2s ease;
    }
    .interactive-element:hover {
      transform: scale(1.01);
    }

    /* Toast – Subtiler */
    #toast {
      position: fixed;
      left: 50%;
      bottom: 24px;
      transform: translateX(-50%);
      background: var(--surface);
      color: var(--ink);
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 14px;
      z-index: 100;
      display: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border: 1px solid var(--border);
      animation: slideUp 0.2s ease;
    }
    @keyframes slideUp {
      from { transform: translateX(-50%) translateY(20px); opacity: 0; }
      to { transform: translateX(-50%) translateY(0); opacity: 1; }
    }

    /* Progress – Subtiler */
    .progress-container {
      position: relative;
    }
    .progress-container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--primary);
      opacity: 0;
      animation: progressGlow 3s ease-in-out infinite alternate;
    }
    .progress-container.complete::after {
      opacity: 0.05;
    }
    @keyframes progressGlow {
      from { opacity: 0; }
      to { opacity: 0.05; }
    }
  </style>
</head>
<body>
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-primary to-primary2 bg-clip-text text-transparent">
        BBiG-Quiz – Ausbildung & Sozialrecht
      </h1>
      <p class="text-lg text-muted mb-8 max-w-2xl mx-auto">
        Wohlwollendes KI-Feedback • §-Quicklook • Autosave • Interaktive Lernumgebung
      </p>
      <div class="flex justify-center gap-4 flex-wrap">
        <div class="badge badge-primary interactive-element">KI-gestützt</div>
        <div class="badge interactive-element">Responsive Design</div>
        <div class="badge interactive-element">Datenschutzfreundlich</div>
      </div>
    </div>
  </section>

  <!-- Hinweis -->
  <aside id="notice" class="bg-gradient-to-r from-blue-50 to-blue-100 border-b border-blue-200">
    <div class="container px-6 py-6 flex items-start gap-4">
      <div class="w-14 h-14 rounded-xl bg-white/80 grid place-items-center shadow-sm interactive-element">
        <i data-lucide="shield-check" class="w-7 h-7 text-blue-600"></i>
      </div>
      <div class="text-sm leading-relaxed flex-1">
        <p class="font-semibold text-slate-800 text-lg">Willkommen zum BBiG-Quiz (Pilot)</p>
        <p class="text-slate-700">
          Schön, dass du testest! Das Quiz ist nach <strong>Clustern</strong> aufgebaut: Wähle ein Cluster, beantworte Fragen gesammelt oder selektiv.
          Das Feedback bezieht sich immer auf die Antworten, die du <em>tatsächlich</em> eingegeben hast. Du erhältst es von <strong>Linda</strong>, der KI-Assistentin.
        </p>
        <p class="text-slate-700 mt-2">
          <strong>Wichtig (Disclaimer):</strong> Keine personenbezogenen oder sensiblen Daten eingeben.
          KI kann Fehler machen; alle Inhalte sind zu prüfen. Keine Rechtsberatung, keine Haftung.
        </p>
        <label class="mt-4 inline-flex items-center gap-2">
          <input id="ack" type="checkbox" class="w-4 h-4 accent-blue-600">
          <span>Ich habe den Hinweis gelesen und akzeptiert.</span>
        </label>
      </div>
      <div class="ml-auto flex items-center gap-3">
        <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/bbig_2005/BBiG.pdf" target="_blank" rel="noopener">
          <i data-lucide="book-open" class="w-4 h-4"></i> BBiG
        </a>
        <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/jarbschg/JArbSchG.pdf" target="_blank" rel="noopener">
          <i data-lucide="shield" class="w-4 h-4"></i> JArbSchG
        </a>
        <span id="ackState" class="badge">Hinweis offen</span>
        <button id="ackBtn" type="button" class="btn btn-primary btn-sm interactive-element">
          <i data-lucide="check" class="w-4 h-4"></i> Weiter
        </button>
      </div>
    </div>
  </aside>

  <!-- Header -->
  <header class="border-b border-[color:var(--border)] bg-[color:var(--surface)] sticky top-0 z-30">
    <div class="container px-6 py-6 flex flex-wrap items-center gap-4 justify-between">
      <div class="flex items-center gap-4">
        <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-blue-600 to-blue-500 grid place-items-center shadow-lg interactive-element">
          <i data-lucide="graduation-cap" class="w-7 h-7 text-white"></i>
        </div>
        <div>
          <h1 class="text-2xl font-semibold">BBiG-Quiz – Ausbildung & Sozialrecht</h1>
          <p class="text-sm text-slate-500">Wohlwollendes KI-Feedback • §-Quicklook • Autosave</p>
        </div>
      </div>
      <div class="flex items-center gap-3">
        <button id="quickBtn" type="button" class="btn btn-sm interactive-element">
          <i data-lucide="search" class="w-4 h-4"></i> §-Quicklook
        </button>
        <button id="themeToggle" type="button" class="btn btn-ghost btn-sm interactive-element" title="Theme wechseln">
          <i data-lucide="moon" class="w-4 h-4"></i>
        </button>
      </div>
    </div>

    <!-- Domain + Cluster-Tabs -->
    <div class="container pb-6">
      <div class="card p-6">
        <div class="flex items-center justify-between gap-4 flex-wrap">
          <div class="seg" role="tablist" aria-label="Bereich wählen">
            <button id="domAusb" type="button" class="px-6 interactive-element" aria-pressed="true">Ausbildung</button>
            <button id="domSoz" type="button" class="px-6 interactive-element" aria-pressed="false">Sozialrecht</button>
          </div>
          <div class="text-sm text-slate-500">Tipp: Auf dem Handy wählst du die Cluster unten im Dropdown.</div>
        </div>
        <div id="tabs" class="tabs mt-6" role="tablist" aria-label="Cluster"></div>
        <select id="clusterSelect" class="mt-4 w-full rounded-lg border px-4 py-3 text-sm"></select>
      </div>
    </div>
  </header>

  <!-- Progress -->
  <section class="container mt-8">
    <div class="card p-6 progress-container">
      <div class="flex items-center gap-4">
        <i data-lucide="target" class="w-7 h-7 text-blue-600"></i>
        <div class="flex-1">
          <div class="flex justify-between text-sm text-slate-500 font-semibold mb-4">
            <span id="progressText">0 / 0 beantwortet</span>
            <span id="selText">0 ausgewählt</span>
          </div>
          <div class="progress-outer">
            <div id="progressBar" class="progress-inner"></div>
          </div>
        </div>
        <time id="timer" class="text-sm text-slate-500 font-mono bg-surface3 px-3 py-1 rounded-full">00:00</time>
      </div>
    </div>
  </section>

  <!-- Quiz -->
  <main class="container my-8">
    <form id="form" class="grid gap-6" novalidate></form>

    <section id="resultWrap" class="hidden mt-8" aria-live="polite">
      <div class="card p-6">
        <div class="flex items-center gap-3 mb-4">
          <i data-lucide="sparkles" class="w-7 h-7 text-emerald-600"></i>
          <h2 class="text-xl font-semibold">KI-Feedback</h2>
        </div>
        <article id="aiResult" class="prose text-sm max-w-none"></article>
      </div>
    </section>
  </main>

  <!-- Sticky Actions -->
  <div class="sticky-actions">
    <div class="container px-6 py-6 flex flex-wrap items-center gap-3">
      <div class="flex items-center gap-3">
        <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/bbig_2005/BBiG.pdf" target="_blank" rel="noopener">
          <i data-lucide="book-open" class="w-4 h-4"></i> BBiG
        </a>
        <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/jarbschg/JArbSchG.pdf" target="_blank" rel="noopener">
          <i data-lucide="shield" class="w-4 h-4"></i> JArbSchG
        </a>
      </div>
      <div class="flex-1"></div>
      <button id="submitBtn" type="button" class="btn btn-primary interactive-element">
        <i data-lucide="send" class="w-5 h-5"></i> KI-Feedback (Auswahl)
      </button>
      <button id="resetBtn" type="button" class="btn interactive-element">
        <i data-lucide="rotate-ccw" class="w-5 h-5"></i> Zurücksetzen
      </button>
    </div>
  </div>

  <!-- Quicklook Modal -->
  <div id="qlBackdrop" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-40"></div>
  <div id="qlModal" class="fixed inset-0 z-50 hidden items-center justify-center p-6">
    <div class="card p-6 w-full max-w-3xl max-h-[90vh] overflow-auto">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-3">
          <i data-lucide="search" class="w-7 h-7 text-blue-600"></i>
          <h3 class="text-xl font-semibold">§-Quicklook – Gesetze & Leitfäden</h3>
        </div>
        <button id="qlClose" class="btn btn-ghost btn-sm interactive-element">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
      </div>
      <div class="grid gap-4">
        <input id="qlSearch" type="search" class="flex-1 rounded-lg border px-4 py-3 text-base focus:ring-2 focus:ring-primary transition-all" placeholder="Begriff oder § …">
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/sgb_1/" target="_blank" rel="noopener">SGB I</a>
          <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/sgb_2/" target="_blank" rel="noopener">SGB II</a>
          <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/sgb_3/" target="_blank" rel="noopener">SGB III</a>
          <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/sgb_4/" target="_blank" rel="noopener">SGB IV</a>
          <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/sgb_5/" target="_blank" rel="noopener">SGB V</a>
          <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/sgb_6/" target="_blank" rel="noopener">SGB VI</a>
          <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/sgb_11/" target="_blank" rel="noopener">SGB XI</a>
          <a class="btn btn-sm interactive-element" href="https://www.gesetze-im-internet.de/jarbschg/BJNR009650976.html#BJNR009650976BJNG000401308" target="_blank" rel="noopener">JArbSchG – Arbeitszeit/Jugend</a>
          <a class="btn btn-sm interactive-element" href="https://www.bgb.de/__106.html" target="_blank" rel="noopener">BGB §106 Geschäftsfähigkeit</a>
          <a class="btn btn-sm interactive-element" href="https://www.dihk.de/de/themen-und-positionen/fachkraefte/aus-und-weiterbildung/ausbildung/mustervertraege-15280" target="_blank" rel="noopener">DIHK – Musterverträge</a>
          <a class="btn btn-sm interactive-element" href="https://www.bibb.de/dienst/berufesuche/de/index_berufesuche.php/profile/apprenticeship/kfmfb25" target="_blank" rel="noopener">BIBB – Rahmenplan KfbM</a>
        </div>
      </div>
      <div id="qlList" class="mt-6 grid gap-4"></div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" style="position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:#1e293b;color:#f1f5f9;padding:12px 16px;border-radius:12px;font-size:14px;z-index:100;display:none"><[...]

  <!-- Linda – Professional Floating Action Button -->
  <button id="lindaBtn" title="Linda öffnen" aria-label="Linda öffnen">
    <svg viewBox="0 0 100 100" width="48" height="48" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient id="g" cx="50%" cy="40%" r="60%">
          <stop offset="0%" stop-color="#1e40af"/>
          <stop offset="100%" stop-color="#3b82f6"/>
        </radialGradient>
      </defs>
      <circle cx="50" cy="50" r="45" fill="url(#g)" stroke="#fff" stroke-width="2"/>
      <circle cx="35" cy="45" r="4" fill="white"/>
      <circle cx="65" cy="45" r="4" fill="white"/>
      <path d="M35 63 Q50 73 65 63" stroke="white" stroke-width="3" stroke-linecap="round" fill="none"/>
      <circle cx="50" cy="75" r="3" fill="white"/>
    </svg>
  </button>

  <!-- Linda – Smart Chat -->
  <div id="lindaWrap" role="dialog" aria-label="Chat mit Linda">
    <div class="l-shell">
      <div id="dragBar" class="l-top">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
        </svg>
        <strong>Linda</strong>
        <span class="text-sm opacity-90"> – deine Lernassistentin</span>
        <div class="ml-auto flex items-center gap-3">
          <button id="closeLinda" class="btn btn-ghost btn-sm">
            <i data-lucide="x" class="w-4 h-4"></i>
          </button>
        </div>
      </div>
      <div class="l-body">
        <div class="l-greet text-sm">
          <p class="font-semibold text-lg">Hallo, ich bin Linda 👋</p>
          <p>Deine persönliche KI-Lernassistentin. Stelle Fragen zu Ausbildung, Sozialrecht oder dem Quiz – ich antworte basierend auf unserer Konversation.</p>
        </div>
        <div id="stream" class="l-stream"></div>
        <div class="l-input">
          <input id="lInput" type="text" placeholder="Frag Linda … (Enter sendet)"/>
          <button id="sendBtn" class="btn btn-primary">
            <i data-lucide="send" class="w-4 h-4"></i>
          </button>
        </div>
      </div>
      <div class="l-resize" id="resizeHandle" aria-hidden="true"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="container">
      Diese Anwendung nutzt künstliche Intelligenz (KI). Du stimmst mit der Nutzung zu, dass Deine Texte und Antworten von OpenAI verarbeitet und geprüft werden.
      Es werden keine personenbezogenen Daten erhoben, erfasst oder verarbeitet. Keine sensiblen Daten eingeben – auch keine Informationen, die Rückschlüsse auf Personen zulassen.
      Missbräuchliche Nutzung ist untersagt. Jegliche Haftung ist ausgeschlossen. Alle Antworten sind zu prüfen. KI-generierte Inhalte können fehlerhaft sein. Keine Haftung.
    </div>
  </footer>

  <script>
    // [Der gesamte Script-Block bleibt unverändert – er ist funktional und benötigt keine Anpassungen für Sichtbarkeit/Design]
  </script>
</body>
</html>
