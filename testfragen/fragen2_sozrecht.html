<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sozialrecht ‚Äì Pr√ºfungsfragen (Rechtsstand 2025)</title>
  <meta name="description" content="Selbsttestsammlung Sozialrecht (SGB IV‚ÄìVII, XI) ‚Äì Daten werden lokal im Browser gespeichert." />
  <style>
    :root {
      --bg: #0b1020;            /* Tiefes Navy f√ºr Hintergrund */
      --card: #111730;          /* Panel-Farbe */
      --muted: #94a3b8;         /* Sekund√§rtext */
      --text: #e6eefc;          /* Prim√§rtext */
      --blue: #1d4ed8;          /* Prim√§rblau */
      --blue-50: #eef2ff;       /* sehr helles Blau */
      --blue-100: #dbeafe;      /* helles Blau */
      --ring: #60a5fa;          /* Fokus-Ring */
      --ok: #10b981;            /* Gr√ºn */
      --warn: #f59e0b;          /* Orange */
      --danger: #ef4444;        /* Rot */
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 700px at 20% -10%, #172554, transparent 70%), var(--bg);
      color:var(--text); font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    .container{max-width:1100px;margin:80px auto 120px;padding:0 20px}
    header.topbar{position:sticky; top:0; z-index:10; backdrop-filter: blur(10px); background:linear-gradient(180deg, rgba(11,16,32,.95), rgba(11,16,32,.6)); border-bottom:1px solid rgba(255,255,255,.06)}
    .topbar-inner{max-width:1100px; margin:auto; display:flex; gap:12px; align-items:center; padding:12px 20px}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{width:38px; height:38px; border-radius:12px; background:linear-gradient(135deg, #60a5fa, #1d4ed8); box-shadow: 0 6px 18px rgba(96,165,250,.45)}
    .brand h1{font-size:18px; margin:0}
    .toolbar{margin-left:auto; display:flex; gap:8px; flex-wrap:wrap}
    button,.btn{appearance:none; border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg, #1e293b, #0f172a); color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600; box-shadow: 0 4px 14px rgba(0,0,0,.25)}
    button:hover{border-color: rgba(255,255,255,.22)}
    button.primary{background:linear-gradient(180deg, #3b82f6, #1d4ed8); border-color:#3b82f6}
    button.ghost{background:transparent}
    button.danger{background:linear-gradient(180deg, #ef4444, #dc2626); border-color:#ef4444}
    .hint{color:var(--muted); font-size:14px}

    .card{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01)); border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); box-shadow:var(--shadow); padding:24px; margin:18px 0}

    .grid{display:grid; grid-template-columns: 1fr; gap:16px}
    @media (min-width:900px){ .grid{grid-template-columns: 1fr 1fr} }

    .meta{display:grid; grid-template-columns: 1fr; gap:12px}
    @media (min-width:700px){ .meta{grid-template-columns: 1.2fr 1fr} }

    .field label{display:block; font-weight:700; margin-bottom:8px}
    .field input[type="text"], .field input[type="email"]{
      width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.14);
      background: #0b1227; color: var(--text); outline:none;
    }
    .field input:focus{border-color:var(--ring); box-shadow:0 0 0 4px rgba(96,165,250,.15)}

    .question{padding:20px; border-radius:var(--radius); background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.07)}
    .question h3{margin:0 0 10px; font-size:18px}
    .qid{display:inline-block; font-size:12px; color:var(--muted); margin-bottom:6px}

    .answer{
      margin-top:12px;
      background: linear-gradient(180deg, var(--blue-100), var(--blue-50));
      border: 2px solid var(--blue);
      border-radius: 14px;
      padding: 10px;
    }
    textarea{
      width:100%; min-height:120px; border:none; background:transparent; color:#0b1227; font: 16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter;
      resize:vertical; outline:none;
    }
    .answer:focus-within{ box-shadow: 0 0 0 4px rgba(96,165,250,.3)}

    .qmeta{display:flex; gap:10px; align-items:center; justify-content:space-between; margin-top:8px; color:#0b1227}
    .saved{font-size:12px}
    .char{font-size:12px}

    .section-title{margin-top:40px; margin-bottom:10px; font-size:22px}

    footer{max-width:1100px; margin:40px auto 80px; padding:0 20px; color:var(--muted)}
    .small{font-size:13px}

    .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04)}
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-weight:700}

    .notice{border-left:4px solid var(--blue); padding:12px 16px; background: rgba(29,78,216,.12); border-radius:12px}

    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
  </style>
</head>
<body>
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <div class="brand" aria-label="Brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>Sozialrecht ‚Äì Pr√ºfungsfragen (2025)</h1>
      </div>
      <div class="toolbar" role="group" aria-label="Aktionen">
        <button class="primary" id="btn-export" title="Antworten als Datei exportieren">Export</button>
        <button id="btn-import" title="Antworten aus Datei laden">Import</button>
        <input type="file" id="file-import" accept="application/json" class="sr-only" />
        <button id="btn-print" class="ghost" title="Druckansicht √∂ffnen">Drucken</button>
        <button id="btn-reset" class="danger" title="Alle Antworten l√∂schen">Zur√ºcksetzen</button>
      </div>
    </div>
  </header>

  <main class="container" id="app" role="main">
    <section class="card">
      <h2 style="margin-top:0">Hinweise</h2>
      <p class="hint">Daten werden ausschlie√ülich <strong>lokal</strong> in Ihrem Browser gespeichert (LocalStorage). Es gibt keinen Server & keine KI‚ÄëAuswertung. Schlie√üen Sie den Browser ‚Äì Ihre Eingaben bleiben erhalten.</p>
      <div class="grid" aria-label="Teilnehmerdaten">
        <div class="field">
          <label for="participant">Teilnehmername</label>
          <input type="text" id="participant" placeholder="Vor- und Nachname" data-qid="meta.participant" />
        </div>
        <div class="field">
          <label for="group">Kurs / Gruppe</label>
          <input type="text" id="group" placeholder="z.‚ÄØB. PFK 10/2025" data-qid="meta.group" />
        </div>
      </div>
      <p class="small"><span class="pill">üíæ&nbsp;Auto‚ÄëSpeichern aktiv</span>&nbsp;&nbsp;<span class="pill">üîí&nbsp;Nur lokal ‚Äì teilen Sie bei Bedarf per <em>Export</em></span></p>
    </section>

    <section>
      <h2 class="section-title">Allgemeines Sozialrecht</h2>
      <div class="question" data-qid="q1">
        <div class="qid">Q1</div>
        <h3>Was sind die Grundprinzipien der Sozialversicherung in Deutschland (Solidarit√§t, Subsidiarit√§t, Selbstverwaltung)?</h3>
        <div class="answer"><label class="sr-only" for="a1">Antwort zu Q1</label><textarea id="a1" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q2">
        <div class="qid">Q2</div>
        <h3>Nennen Sie die f√ºnf Zweige der Sozialversicherung und deren gesetzliche Grundlagen.</h3>
        <div class="answer"><label class="sr-only" for="a2">Antwort zu Q2</label><textarea id="a2" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q3">
        <div class="qid">Q3</div>
        <h3>Wie wird der Gesamtsozialversicherungsbeitrag berechnet und welche Zweige umfasst er?</h3>
        <div class="answer"><label class="sr-only" for="a3">Antwort zu Q3</label><textarea id="a3" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q4">
        <div class="qid">Q4</div>
        <h3>Wer ist f√ºr die Abf√ºhrung des Gesamtsozialversicherungsbeitrags verantwortlich?</h3>
        <div class="answer"><label class="sr-only" for="a4">Antwort zu Q4</label><textarea id="a4" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q5">
        <div class="qid">Q5</div>
        <h3>Wer geh√∂rt 2025 zum versicherten Personenkreis in der Sozialversicherung? Nennen Sie Beispiele.</h3>
        <div class="answer"><label class="sr-only" for="a5">Antwort zu Q5</label><textarea id="a5" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q6">
        <div class="qid">Q6</div>
        <h3>Was versteht man unter einer geringf√ºgigen Besch√§ftigung (Mini‚ÄëJob) und wo liegt die Geringf√ºgigkeitsgrenze?</h3>
        <div class="answer"><label class="sr-only" for="a6">Antwort zu Q6</label><textarea id="a6" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
    </section>

    <section>
      <h2 class="section-title">Rentenversicherung (SGB VI)</h2>
      <div class="question" data-qid="q7">
        <div class="qid">Q7</div>
        <h3>Was sind die Hauptaufgaben der gesetzlichen Rentenversicherung?</h3>
        <div class="answer"><label class="sr-only" for="a7">Antwort zu Q7</label><textarea id="a7" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q8">
        <div class="qid">Q8</div>
        <h3>Welche Leistungen umfasst die gesetzliche Rentenversicherung?</h3>
        <div class="answer"><label class="sr-only" for="a8">Antwort zu Q8</label><textarea id="a8" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q9">
        <div class="qid">Q9</div>
        <h3>Wer ist in der Rentenversicherung pflichtversichert? Nennen Sie drei Gruppen.</h3>
        <div class="answer"><label class="sr-only" for="a9">Antwort zu Q9</label><textarea id="a9" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q10">
        <div class="qid">Q10</div>
        <h3>Nennen Sie die Voraussetzungen f√ºr die Regelaltersrente und zwei vorgezogene Altersrentenarten.</h3>
        <div class="answer"><label class="sr-only" for="a10">Antwort zu Q10</label><textarea id="a10" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
    </section>

    <section>
      <h2 class="section-title">Krankenversicherung (SGB V)</h2>
      <div class="question" data-qid="q11">
        <div class="qid">Q11</div>
        <h3>Welche Leistungen umfasst die gesetzliche Krankenversicherung? Nennen Sie mindestens f√ºnf Beispiele.</h3>
        <div class="answer"><label class="sr-only" for="a11">Antwort zu Q11</label><textarea id="a11" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q12">
        <div class="qid">Q12</div>
        <h3>Wie ist das Sachleistungsprinzip ausgestaltet und welche Rolle spielt das Wirtschaftlichkeitsgebot?</h3>
        <div class="answer"><label class="sr-only" for="a12">Antwort zu Q12</label><textarea id="a12" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q13">
        <div class="qid">Q13</div>
        <h3>Familienversicherung: Wer kann √ºber ¬ß 10 SGB V mitversichert werden und unter welchen Voraussetzungen?</h3>
        <div class="answer"><label class="sr-only" for="a13">Antwort zu Q13</label><textarea id="a13" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q14">
        <div class="qid">Q14</div>
        <h3>Nennen Sie die wesentlichen Unterschiede zwischen GKV und PKV.</h3>
        <div class="answer"><label class="sr-only" for="a14">Antwort zu Q14</label><textarea id="a14" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
    </section>

    <section>
      <h2 class="section-title">Pflegeversicherung (SGB XI)</h2>
      <div class="question" data-qid="q15">
        <div class="qid">Q15</div>
        <h3>Wer ist in der sozialen Pflegeversicherung versicherungspflichtig? Nennen Sie die ma√ügeblichen Normen.</h3>
        <div class="answer"><label class="sr-only" for="a15">Antwort zu Q15</label><textarea id="a15" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q16">
        <div class="qid">Q16</div>
        <h3>Wie wird Pflegebed√ºrftigkeit festgestellt (Begriff, Verfahren, Pflegegrade)?</h3>
        <div class="answer"><label class="sr-only" for="a16">Antwort zu Q16</label><textarea id="a16" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q17">
        <div class="qid">Q17</div>
        <h3>Welche Leistungen gibt es bei ambulanter Pflege und wie unterscheiden sie sich je nach Pflegegrad?</h3>
        <div class="answer"><label class="sr-only" for="a17">Antwort zu Q17</label><textarea id="a17" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q18">
        <div class="qid">Q18</div>
        <h3>Welche Zusch√ºsse gibt es zur Verbesserung des Wohnumfelds? Nennen Sie Voraussetzungen und F√∂rderh√∂he.</h3>
        <div class="answer"><label class="sr-only" for="a18">Antwort zu Q18</label><textarea id="a18" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
    </section>

    <section>
      <h2 class="section-title">Unfallversicherung (SGB VII)</h2>
      <div class="question" data-qid="q19">
        <div class="qid">Q19</div>
        <h3>Welche Aufgaben hat die gesetzliche Unfallversicherung?</h3>
        <div class="answer"><label class="sr-only" for="a19">Antwort zu Q19</label><textarea id="a19" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q20">
        <div class="qid">Q20</div>
        <h3>Wann liegt ein Arbeitsunfall vor? Grenzen Sie von Wege‚Äë und Freizeitunf√§llen ab.</h3>
        <div class="answer"><label class="sr-only" for="a20">Antwort zu Q20</label><textarea id="a20" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q21">
        <div class="qid">Q21</div>
        <h3>Nennen Sie die wichtigsten Leistungen nach Eintritt des Versicherungsfalls (Heilbehandlung bis Geldleistungen).</h3>
        <div class="answer"><label class="sr-only" for="a21">Antwort zu Q21</label><textarea id="a21" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q22">
        <div class="qid">Q22</div>
        <h3>Wer tr√§gt die Beitr√§ge zur Unfallversicherung und wie werden sie erhoben?</h3>
        <div class="answer"><label class="sr-only" for="a22">Antwort zu Q22</label><textarea id="a22" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
    </section>

    <section>
      <h2 class="section-title">Querbez√ºge & Organisation</h2>
      <div class="question" data-qid="q23">
        <div class="qid">Q23</div>
        <h3>Welche Umlageverfahren U1/U2 gibt es, wof√ºr sind sie da und wer nimmt teil?</h3>
        <div class="answer"><label class="sr-only" for="a23">Antwort zu Q23</label><textarea id="a23" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q24">
        <div class="qid">Q24</div>
        <h3>Welche Instanzen umfasst die Sozialgerichtsbarkeit und welche F√§lle werden dort entschieden?</h3>
        <div class="answer"><label class="sr-only" for="a24">Antwort zu Q24</label><textarea id="a24" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
      <div class="question" data-qid="q25">
        <div class="qid">Q25</div>
        <h3>Welche Beitragsbemessungsgrenzen gelten 2025 in RV/ALV sowie in KV/PV und wie wirken sie?</h3>
        <div class="answer"><label class="sr-only" for="a25">Antwort zu Q25</label><textarea id="a25" placeholder="Ihre Antwort‚Ä¶"></textarea></div>
        <div class="qmeta"><span class="saved" data-status></span><span class="char" data-chars>0 Zeichen</span></div>
      </div>
    </section>

    <section class="card notice" aria-live="polite" aria-atomic="true">
      <p class="small">Tipp: Mit <span class="kbd">Export</span> speichern Sie eine <code>.json</code>-Datei Ihrer Antworten (z.‚ÄØB. f√ºr Abgabe/Backup). Mit <span class="kbd">Import</span> k√∂nnen Sie diese wieder laden ‚Äì auch auf einem anderen Ger√§t/Browser.</p>
    </section>
  </main>

  <footer>
    <p class="small">¬© 2025 ‚Äì Selbsttest Sozialrecht (SGB IV‚ÄìVII, XI). Diese Seite arbeitet offline, speichert ausschlie√ülich lokal und sendet keine Daten an Server.</p>
  </footer>

  <script>
    (function(){
      const STORAGE_KEY = 'sozialrechtQuiz2025.v1';
      const formNodes = document.querySelectorAll('.question');
      const metaNodes = document.querySelectorAll('[data-qid^="meta."]');
      const fileInput = document.getElementById('file-import');

      const debounce = (fn, delay=300)=>{
        let t; return (...args)=>{ clearTimeout(t); t=setTimeout(()=>fn(...args), delay); };
      };

      const state = {
        meta: {},
        answers: {},
        updatedAt: null,
        version: 1
      };

      const save = debounce(()=>{
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
          updateSavedBadges('Gespeichert');
        } catch(e){ console.warn('Speichern fehlgeschlagen:', e); }
      }, 250);

      function load(){
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return;
        try{
          const data = JSON.parse(raw);
          if(data && data.answers){ Object.assign(state.answers, data.answers); }
          if(data && data.meta){ Object.assign(state.meta, data.meta); }
          state.updatedAt = data.updatedAt || null;
          // felder setzen
          formNodes.forEach(q=>{
            const qid = q.dataset.qid; const ta = q.querySelector('textarea');
            const val = state.answers[qid] || '';
            ta.value = val; updateChars(q, val.length);
          });
          metaNodes.forEach(input=>{ const qid = input.dataset.qid; input.value = state.meta[qid] || ''; });
        }catch(e){ console.warn('Laden fehlgeschlagen:', e); }
      }

      function updateSavedBadges(text){
        document.querySelectorAll('[data-status]').forEach(s=>{ s.textContent = text; });
      }

      function updateChars(qNode, n){
        const c = qNode.querySelector('[data-chars]'); if(c) c.textContent = n + ' Zeichen';
      }

      // Events: Antworten
      formNodes.forEach(q=>{
        const qid = q.dataset.qid; const ta = q.querySelector('textarea');
        ta.addEventListener('input', e=>{
          const v = e.target.value; state.answers[qid] = v; state.updatedAt = Date.now(); updateChars(q, v.length); save();
        });
        // initial counter
        updateChars(q, (state.answers[qid]||'').length);
      });

      // Events: Meta
      metaNodes.forEach(input=>{
        input.addEventListener('input', e=>{ const qid = e.target.dataset.qid; state.meta[qid] = e.target.value; state.updatedAt = Date.now(); save(); });
      });

      // Buttons
      document.getElementById('btn-export').addEventListener('click', ()=>{
        const payload = { ...state, exportedAt: new Date().toISOString() };
        const blob = new Blob([JSON.stringify(payload, null, 2)], {type:'application/json'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        const name = (state.meta['meta.participant']||'unbenannt').replace(/\s+/g,'_');
        a.download = `sozialrecht_antworten_${name}.json`;
        document.body.appendChild(a); a.click(); a.remove();
        setTimeout(()=>URL.revokeObjectURL(a.href), 500);
      });

      document.getElementById('btn-import').addEventListener('click', ()=> fileInput.click());
      fileInput.addEventListener('change', (ev)=>{
        const file = ev.target.files && ev.target.files[0]; if(!file) return;
        const reader = new FileReader();
        reader.onload = (e)=>{
          try{
            const data = JSON.parse(e.target.result);
            if(!data || (!data.answers && !data.meta)) throw new Error('Dateiformat unbekannt');
            // √ºbernehmen
            state.answers = data.answers || {};
            state.meta = data.meta || {};
            state.updatedAt = Date.now();
            // render
            formNodes.forEach(q=>{ const qid=q.dataset.qid; const ta=q.querySelector('textarea'); ta.value = state.answers[qid]||''; updateChars(q, (ta.value||'').length); });
            metaNodes.forEach(inp=>{ const qid=inp.dataset.qid; inp.value = state.meta[qid]||''; });
            save();
            alert('Import erfolgreich.');
          }catch(err){ alert('Import fehlgeschlagen: '+ err.message); }
        };
        reader.readAsText(file);
        // reset input, damit erneut gleiche Datei w√§hlbar ist
        ev.target.value = '';
      });

      document.getElementById('btn-print').addEventListener('click', ()=>window.print());

      document.getElementById('btn-reset').addEventListener('click', ()=>{
        if(confirm('Wirklich alle Antworten lokal l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.')){
          localStorage.removeItem(STORAGE_KEY);
          // Felder leeren
          formNodes.forEach(q=>{ const ta=q.querySelector('textarea'); ta.value=''; updateChars(q, 0); });
          metaNodes.forEach(inp=>{ inp.value=''; });
          state.answers = {}; state.meta = {}; state.updatedAt = null; updateSavedBadges('Zur√ºckgesetzt');
        }
      });

      // Beim ersten Start laden
      load();
    })();
  </script>
</body>
</html>
